# Mosquitto MQTT Broker Configuration
# Sentient Engine Production Configuration

# General Settings
listener 1883 0.0.0.0
protocol mqtt

# Websocket listener for web clients
listener 9001
protocol websockets

# Persistence
persistence true
persistence_location /mosquitto/data/
autosave_interval 1800

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# Connection settings
max_connections -1
max_keepalive 300
max_queued_messages 1000

# Security
allow_anonymous false
password_file /mosquitto/config/mosquitto_passwd
acl_file /mosquitto/config/mosquitto.acl

# Message size limits (max_packet_size replaces message_size_limit in Mosquitto 2.x)
max_packet_size 268435456

# Queue settings
max_inflight_messages 20
max_queued_bytes 0

# Connection timeout
persistent_client_expiration 1d